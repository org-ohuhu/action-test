name: Actions Runner Controller Demo
on:
  workflow_dispatch:

jobs:
  GoBuild:
    # runs-on: arc-runner-set
    runs-on: ubuntu-latest
    steps:
      - name: Clear any existing tool cache
        run: |
          mv "{% raw %}${{ runner.tool_cache }}" "${{ runner.tool_cache }}.old"{% endraw %}
          mkdir -p "{% raw %}${{ runner.tool_cache }}{% endraw %}"

      - uses: actions/checkout@v3
      - name: Set up Go
        uses: actions/setup-go@v3
        with:
          go-version: 1.21.6

      - name: Archive tool cache
        run: |
          cd "{% raw %}${{ runner.tool_cache }}{% endraw %}"
          tar -czf tool_cache.tar.gz *

      # - run: git config --global url.https://$GH_ACCESS_TOKEN@github.com/.insteadOf https://github.com/
      # - name: Login to Aliyun Container Registry (ACR)
      #   uses: aliyun/acr-login@v1
      #   with:
      #     login-server: univer-acr-registry.cn-shenzhen.cr.aliyuncs.com
      #     region-id: cn-shenzhen
      #     username: "${{ secrets.REGISTRY_USERNAME }}"
      #     password: "${{ secrets.REGISTRY_PASSWORD }}"
      # - name: Set up QEMU
      #   uses: docker/setup-qemu-action@v3
      # - name: Set up Docker Buildx
      #   uses: docker/setup-buildx-action@v3
      # - name: Build and Push Docker Image
      #   run: |
      #     IMAGE_TAG=$(echo "${{ github.sha }}" | cut -c 1-7)
      #     make push_image PUSH_TAG=$IMAGE_TAG

  